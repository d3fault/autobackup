<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="6123.0571"
   height="5592.437"
   id="svg2"
   version="1.1"
   inkscape:version="0.48.3.1 r9886"
   sodipodi:docname="gfs.as.keyvalue.map.solved.and.also.lots.of.considerations.incl.fileformat.for.file.aka.chunk.svg">
  <defs
     id="defs4" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.70710678"
     inkscape:cx="2526.7995"
     inkscape:cy="1660.1218"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1440"
     inkscape:window-height="853"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-42.357143,-154.29355)">
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect2816"
       width="572.85712"
       height="547.14288"
       x="42.857143"
       y="176.6479" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="254.55844"
       y="169.48886"
       id="text3590"><tspan
         sodipodi:role="line"
         id="tspan3592"
         x="254.55844"
         y="169.48886">Chunk Server</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect3594"
       width="243.44676"
       height="173.74623"
       x="345.47217"
       y="285.6564" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="384.8681"
       y="274.54474"
       id="text3596"><tspan
         sodipodi:role="line"
         id="tspan3598"
         x="384.8681"
         y="274.54474">File / 64mb Chunk</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="348.5"
       y="307.62247"
       id="text3344"><tspan
         sodipodi:role="line"
         x="348.5"
         y="307.62247"
         id="tspan3346"><tspan
           x="348.5"
           y="307.62247"
           id="tspan3348">quint32 size/qbapeek;</tspan></tspan><tspan
         sodipodi:role="line"
         x="348.5"
         y="332.62247"
         id="tspan3350"><tspan
           x="348.5"
           id="tspan3352">(filename.length()-</tspan></tspan><tspan
         sodipodi:role="line"
         x="348.5"
         y="357.62247"
         id="tspan3354"><tspan
           x="348.5"
           id="tspan3356">sizeof(sha1hashInHex)) </tspan></tspan><tspan
         sodipodi:role="line"
         x="348.5"
         y="382.62247"
         id="tspan3358"><tspan
           x="348.5"
           id="tspan3360">keyRemains;dataValue;</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:14px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="52.527935"
       y="340.20462"
       id="text3608"><tspan
         sodipodi:role="line"
         id="tspan3610"
         x="52.527935"
         y="340.20462">At startup the chunks are read </tspan><tspan
         sodipodi:role="line"
         x="52.527935"
         y="357.70462"
         id="tspan3612">and (possibly checksuming too) </tspan><tspan
         sodipodi:role="line"
         x="52.527935"
         y="375.20462"
         id="tspan3614">an in-memory map of </tspan><tspan
         sodipodi:role="line"
         x="52.527935"
         y="392.70462"
         id="tspan3624">keyRemainsToValues is made/maintained</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#ff0000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="341.42273"
       y="414.68814"
       id="text3362"><tspan
         sodipodi:role="line"
         x="341.42273"
         y="414.68814"
         id="tspan3364"><tspan
           x="341.42273"
           y="414.68814"
           id="tspan3366">^^1x atomic append^^</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="628.57141"
       y="346.64792"
       id="text3634"><tspan
         sodipodi:role="line"
         id="tspan3636"
         x="628.57141"
         y="346.64792">We design our applications, or perhaps middle layers (clients?), so that</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="371.64792"
         id="tspan3640">overwrites are minized. The idea is that everything, including a delete,</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="396.64792"
         id="tspan3644">is merely a mutation.</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="421.64792"
         id="tspan3646" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="446.64792"
         id="tspan3648">Mutations have to be calculated to get the latest state of the userProfile, for example (another is blogPost)</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="471.64792"
         id="tspan3654" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="496.64792"
         id="tspan3656">We could set it up so that the first version is mutation0 and then periodically checkpoint a series of mutations</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="521.64795"
         id="tspan3658">that were applied to that mutation as mutation1</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="546.64795"
         id="tspan3660" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="571.64795"
         id="tspan3662">Knowing what is the latest checksummed mutation for a given mutation now has to be stored!</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="596.64795"
         id="tspan3664">It too stores itself as a mutation, but the difference is that it will be checksummed far less frequently</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="621.64795"
         id="tspan3666" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="646.64795"
         id="tspan3668" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="671.64795"
         id="tspan3670">It helps to think about a 'core item' (the first version inserted) that a series of 'core item'-mutations are applied to,</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="696.64795"
         id="tspan3672">however the underlying code might find it more optimized to store even the first version as the same data type as </tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="721.64795"
         id="tspan3674">the mutations that mutate it! It could represent a mutation on &quot;0&quot; or &quot;empty&quot; (or whatever analog necessary)</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="746.64795"
         id="tspan3676" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="771.64795"
         id="tspan3678">^^That in mind when dealing with checkpointing. The 'core item' is mutation0 yet the 'core item' needs to somehow</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="796.64795"
         id="tspan3680">reflect when a snapshot is created and mutation1 is made.</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="821.64795"
         id="tspan3682" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="846.64795"
         id="tspan3684">At this point I am unsure if there is a dependency error in solving the distributed database problem that this depends</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="871.64795"
         id="tspan3686">before/while/during/wtf using it(???)</tspan><tspan
         sodipodi:role="line"
         x="628.57141"
         y="896.64795"
         id="tspan3650" /><tspan
         sodipodi:role="line"
         x="628.57141"
         y="921.64795"
         id="tspan3652" /></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1.10378897;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect3688"
       width="221.32478"
       height="214.18192"
       x="1046.6947"
       y="1253.0028" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1058.0803"
       y="1272.8982"
       id="text3368"><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1272.8982"
         id="tspan3370"><tspan
           x="1058.0803"
           y="1272.8982"
           id="tspan3372">{</tspan><tspan
           dx="0"
           x="1070.8147"
           y="1272.8982"
           id="tspan3374" /></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1297.8982"
         id="tspan3376"><tspan
           x="1058.0803"
           y="1297.8982"
           id="tspan3378">    string </tspan></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1322.8982"
         id="tspan3380"><tspan
           x="1058.0803"
           y="1322.8982"
           id="tspan3382">oneWayHashedPass</tspan></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1347.8982"
         id="tspan3384"><tspan
           x="1058.0803"
           y="1347.8982"
           id="tspan3386">word;</tspan><tspan
           dx="0"
           x="1114.0178"
           y="1347.8982"
           id="tspan3388" /></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1372.8982"
         id="tspan3390"><tspan
           x="1058.0803"
           y="1372.8982"
           id="tspan3392">    string email;</tspan><tspan
           dx="0"
           x="1209.2913"
           y="1372.8982"
           id="tspan3394" /></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1397.8982"
         id="tspan3396"><tspan
           x="1058.0803"
           y="1397.8982"
           id="tspan3398">    boolean gender;</tspan><tspan
           dx="0"
           x="1247.5725"
           y="1397.8982"
           id="tspan3400" /></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1422.8982"
         id="tspan3402"><tspan
           x="1058.0803"
           y="1422.8982"
           id="tspan3404">    etc</tspan><tspan
           dx="0"
           x="1114.7209"
           y="1422.8982"
           id="tspan3406" /></tspan><tspan
         sodipodi:role="line"
         x="1058.0803"
         y="1447.8982"
         id="tspan3408"><tspan
           x="1058.0803"
           y="1447.8982"
           id="tspan3410">}</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1048.0714"
       y="1221.5225"
       id="text3710"><tspan
         sodipodi:role="line"
         id="tspan3712"
         x="1048.0714"
         y="1221.5225">Initial Insert</tspan><tspan
         sodipodi:role="line"
         x="1048.0714"
         y="1246.5225"
         id="tspan3714">/appAbc/userProfileTestName0</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1483.7858"
       y="1241.5223"
       id="text3716"><tspan
         sodipodi:role="line"
         id="tspan3718"
         x="1483.7858"
         y="1241.5223">/appAbc/userProfileTestName0Mutation0</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1515.2142"
       y="1217.2367"
       id="text3720"><tspan
         sodipodi:role="line"
         id="tspan3722"
         x="1515.2142"
         y="1217.2367">Mutation 0</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect3724"
       width="338.57144"
       height="237.14285"
       x="1432.8572"
       y="1098.6573"
       transform="translate(42.357143,154.29355)" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1445.7144"
       y="1117.2288"
       id="text3726"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan3728"
         x="1445.7144"
         y="1117.2288">{</tspan><tspan
         sodipodi:role="line"
         x="1445.7144"
         y="1142.2288"
         id="tspan3730">    string updatedEmail;</tspan><tspan
         sodipodi:role="line"
         x="1445.7144"
         y="1167.2288"
         id="tspan3732">    etc</tspan><tspan
         sodipodi:role="line"
         x="1445.7144"
         y="1192.2288"
         id="tspan3734">}</tspan></text>
    <text
       id="text3738"
       y="1241.5223"
       x="1980.9286"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="1241.5223"
         x="1980.9286"
         id="tspan3740"
         sodipodi:role="line">/appAbc/userProfileTestName0Mutation1</tspan></text>
    <text
       id="text3742"
       y="1217.2367"
       x="2012.3571"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="1217.2367"
         x="2012.3571"
         id="tspan3744"
         sodipodi:role="line">Mutation 1</tspan></text>
    <rect
       y="1252.9509"
       x="1972.3572"
       height="237.14285"
       width="338.57144"
       id="rect3746"
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <text
       id="text3748"
       y="1271.5223"
       x="1985.2144"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="1271.5223"
         x="1985.2144"
         id="tspan3750"
         sodipodi:role="line">{</tspan><tspan
         id="tspan3752"
         y="1296.5223"
         x="1985.2144"
         sodipodi:role="line">    string updatedEmail;</tspan><tspan
         id="tspan3754"
         y="1321.5223"
         x="1985.2144"
         sodipodi:role="line">    etc</tspan><tspan
         id="tspan3756"
         y="1346.5223"
         x="1985.2144"
         sodipodi:role="line">}</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1559.4999"
       y="1157.2367"
       id="text3758"><tspan
         sodipodi:role="line"
         id="tspan3760"
         x="1559.4999"
         y="1157.2367">hmm could keep reading mutations until one isn't found to get most recent?</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1483.7858"
       y="1528.6652"
       id="text3762"><tspan
         sodipodi:role="line"
         id="tspan3764"
         x="1483.7858"
         y="1528.6652">At this point a request for the original</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1553.6652"
         id="tspan3766">key needs to respond with the latest</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1578.6652"
         id="tspan3768">value with all the mutations applied</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1603.6652"
         id="tspan3770" /><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1628.6652"
         id="tspan3772">Random Note introducing complications:</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1653.6652"
         id="tspan3774">Aren't these mutations, if accessed how</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1678.6652"
         id="tspan3776">I have it right now, stored on potentially</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1703.6652"
         id="tspan3778">a completely different machine?</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1728.6652"
         id="tspan3780" /><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1753.6652"
         id="tspan3782">Do we store mutations to a key in a chunk</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1778.6652"
         id="tspan3784">in the same chunk? This sounds like the better</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1803.6652"
         id="tspan3786">solution, but I think I now need to update what</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1828.6652"
         id="tspan3788">that atomic write will look like so that it can</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1853.6652"
         id="tspan3790">later point to a different snapshotted mutation</tspan><tspan
         sodipodi:role="line"
         x="1483.7858"
         y="1878.6652"
         id="tspan3792">SOMEHOW? How idfk but definitely/prbly somehow</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect3794"
       width="323.24881"
       height="236.3757"
       x="1105.1069"
       y="1871.9734"
       transform="translate(42.357143,154.29355)" />
    <text
       xml:space="preserve"
       style="font-size:48px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1193.9312"
       y="2149.5056"
       id="text3796"><tspan
         sodipodi:role="line"
         id="tspan3798"
         x="1193.9312"
         y="2149.5056">My Client</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1.81122363;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect3800"
       width="627.50366"
       height="427.49347"
       x="1887.3013"
       y="2014.5507" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1987.911"
       y="2052.5308"
       id="text3802"><tspan
         sodipodi:role="line"
         id="tspan3804"
         x="1987.911"
         y="2052.5308">Chunk Server and/or perhaps even a GFS</tspan><tspan
         sodipodi:role="line"
         x="1987.911"
         y="2077.5308"
         id="tspan3806">Client that has been wrapped</tspan></text>
    <g
       id="g3812"
       transform="matrix(1.7129111,0,0,1,-1218.4333,0)">
      <path
         transform="translate(42.357143,154.29355)"
         id="path3808"
         d="m 1527.3506,2051.7806 242.4367,0 -48.4874,-48.4874"
         style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
      <path
         style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         d="m 1569.7077,2207.0764 242.4367,0 -48.4874,48.4874"
         id="path3810" />
    </g>
    <text
       xml:space="preserve"
       style="font-size:14px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1474.2484"
       y="2199.2556"
       id="text3816"><tspan
         sodipodi:role="line"
         id="tspan3818"
         x="1474.2484"
         y="2199.2556">bitchGimmehLatestValueForKey(/appAbc/userProfile0)</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:12px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1897.8746"
       y="1978.8475"
       id="text3820"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan3822"
         x="1897.8746"
         y="1978.8475">Keeping in-memory copy up-to-date is a breeze</tspan><tspan
         sodipodi:role="line"
         x="1897.8746"
         y="1993.8475"
         id="tspan3824" /><tspan
         sodipodi:role="line"
         x="1897.8746"
         y="2008.8475"
         id="tspan3826">How we load from persistent medium is what is</tspan><tspan
         sodipodi:role="line"
         x="1897.8746"
         y="2023.8475"
         id="tspan3828">a little difficult in order to utilize the benefits</tspan><tspan
         sodipodi:role="line"
         x="1897.8746"
         y="2038.8475"
         id="tspan3830">of snapshotting. Without snapshotting it too</tspan><tspan
         sodipodi:role="line"
         x="1897.8746"
         y="2053.8477"
         id="tspan3832">is a breeze.</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1962.8522"
       y="2240.8542"
       id="text3412"><tspan
         sodipodi:role="line"
         x="1962.8522"
         y="2240.8542"
         id="tspan3414"><tspan
           x="1962.8522"
           y="2240.8542"
           id="tspan3416">^^^This example (this diagram with one arrow so </tspan></tspan><tspan
         sodipodi:role="line"
         x="1962.8522"
         y="2265.8542"
         id="tspan3418"><tspan
           x="1962.8522"
           y="2265.8542"
           id="tspan3420">far) sucks because of the above observation. Reads </tspan></tspan><tspan
         sodipodi:role="line"
         x="1962.8522"
         y="2290.8542"
         id="tspan3422"><tspan
           x="1962.8522"
           y="2290.8542"
           id="tspan3424">are already up to date, so I need to attempt the </tspan></tspan><tspan
         sodipodi:role="line"
         x="1962.8522"
         y="2315.8542"
         id="tspan3426"><tspan
           x="1962.8522"
           y="2315.8542"
           id="tspan3428">'startup' procedure in order to see the snapshotting</tspan><tspan
           dx="0"
           x="2481.6804"
           y="2315.8542"
           id="tspan3430" /></tspan><tspan
         sodipodi:role="line"
         x="1962.8522"
         y="2340.8542"
         id="tspan3432"><tspan
           x="1962.8522"
           y="2340.8542"
           id="tspan3434">in action</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2436.6206"
       y="1451.5862"
       id="text3844"><tspan
         sodipodi:role="line"
         id="tspan3846"
         x="2436.6206"
         y="1451.5862">I am using Inkscape as a mindmapping application (does well tbh)</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1476.5862"
         id="tspan3848">and I am also coding in a high level form that I would hope to see</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1501.5862"
         id="tspan3850">in designEquals someday. It will obviously have more formality to it</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1526.5862"
         id="tspan3852">in order to be parsed, but I mean the &quot;initial designs&quot; themselves</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1551.5862"
         id="tspan3854">don't have to be able to. Whatever helps you 'jot it down'. Remember</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1576.5862"
         id="tspan3856">that for a given project there is: 0) Designs/Ideas [few] 1) Notes [tons] 2) Code 3) Binary</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1601.5862"
         id="tspan3858">and that in a 'd3fault computing environment' where InlineEditable and namely</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1626.5862"
         id="tspan3860">designEquals (InlineEditable is merely bootstrap problem at this point) all 4 of those</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1651.5862"
         id="tspan3862">'files' (maybe just 'nodes'? I have no idea what data type/view looks like/will be atm)</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1676.5862"
         id="tspan3864">are related to each other under a common &quot;project&quot; and are tagged/rendered for what they are!</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1701.5862"
         id="tspan3866">Designs/Ideas,Notes,Code are all easy to 'render' and even update/mutate/etc, but binaries actually</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1726.5862"
         id="tspan3868">'execute' and there isn't [normally] modification directly to them. They do not [normally] mutate</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1751.5862"
         id="tspan3870">(the case where they do can have hacks inserted galore) so they don't have an &quot;edit&quot; equivalent (for now...?</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1776.5862"
         id="tspan3872">I mean I guess what I'm saying is I'll probably never reverse engineer because it's just not my thing... but</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1801.5862"
         id="tspan3874">there is value to it and yea. But really I like forward engineering because you are creating new, and I like open</tspan><tspan
         sodipodi:role="line"
         x="2436.6206"
         y="1826.5862"
         id="tspan3876">source / free software because it minimized time &quot;wasted&quot; on reverse engineering)</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3575.0625"
       y="1704.7303"
       id="text3878"><tspan
         sodipodi:role="line"
         id="tspan3880"
         x="3575.0625"
         y="1704.7303">bleh some horse shit to the left. there are two kinds of designs. 'initial' designs and then compilable designs</tspan><tspan
         sodipodi:role="line"
         x="3575.0625"
         y="1729.7303"
         id="tspan3882">the initial designs fall under the same category as notes. they tend to be of textual content (albeit xml dia/inkscape)</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2047.712"
       y="2686.1946"
       id="text3884"><tspan
         sodipodi:role="line"
         id="tspan3886"
         x="2047.712"
         y="2686.1946">sha1Remains(/appAbc/userProfileTestName0)</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2094.3884"
       y="2716.041"
       id="text3436"><tspan
         sodipodi:role="line"
         x="2094.3884"
         y="2716.041"
         id="tspan3438"><tspan
           x="2094.3884"
           y="2716.041"
           id="tspan3440">{</tspan><tspan
           dx="0"
           x="2107.1228"
           y="2716.041"
           id="tspan3442" /></tspan><tspan
         sodipodi:role="line"
         x="2094.3884"
         y="2741.041"
         id="tspan3444"><tspan
           x="2094.3884"
           y="2741.041"
           id="tspan3446">    latestMutationInSnapshot: /appAbc/userProfileTestName0Mutation0</tspan><tspan
           dx="0"
           x="2796.5369"
           y="2741.041"
           id="tspan3448" /></tspan><tspan
         sodipodi:role="line"
         x="2094.3884"
         y="2766.041"
         id="tspan3450"><tspan
           x="2094.3884"
           y="2766.041"
           id="tspan3452">    latestSnapshot: /appAbc/userProfileTestName0Snapshot0</tspan><tspan
           dx="0"
           x="2694.7009"
           y="2766.041"
           id="tspan3454" /></tspan><tspan
         sodipodi:role="line"
         x="2094.3884"
         y="2791.041"
         id="tspan3456"><tspan
           x="2094.3884"
           y="2791.041"
           id="tspan3458">}</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2850.9854"
       y="2684.7803"
       id="text3904"><tspan
         sodipodi:role="line"
         id="tspan3906"
         x="2850.9854"
         y="2684.7803">sameFileMutationAKARecordAppendFor(sha1remains(appAbc/userProfileTestName0))</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2876.4509"
       y="2718.8535"
       id="text3460"><tspan
         sodipodi:role="line"
         x="2876.4509"
         y="2718.8535"
         id="tspan3462"><tspan
           x="2876.4509"
           y="2718.8535"
           id="tspan3464">{</tspan><tspan
           dx="0"
           x="2889.1853"
           y="2718.8535"
           id="tspan3466" /></tspan><tspan
         sodipodi:role="line"
         x="2876.4509"
         y="2743.8535"
         id="tspan3468"><tspan
           x="2876.4509"
           y="2743.8535"
           id="tspan3470">    latestMutationInSnapshot: /appAbc/userProfileTestName0Mutation2</tspan><tspan
           dx="0"
           x="3578.5994"
           y="2743.8535"
           id="tspan3472" /></tspan><tspan
         sodipodi:role="line"
         x="2876.4509"
         y="2768.8535"
         id="tspan3474"><tspan
           x="2876.4509"
           y="2768.8535"
           id="tspan3476">    newlatestSnapshot: /appAbc/userProfileTestName0Snapshot1</tspan><tspan
           dx="0"
           x="3518.1306"
           y="2768.8535"
           id="tspan3478" /></tspan><tspan
         sodipodi:role="line"
         x="2876.4509"
         y="2793.8535"
         id="tspan3480"><tspan
           x="2876.4509"
           y="2793.8535"
           id="tspan3482">}</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2537.0991"
       y="2739.7903"
       id="text3928"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan3930"
         x="2537.0991"
         y="2739.7903">We store the 'latestMutationInSnapshot' because without it, we wouldn't know which mutations</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2764.7903"
         id="tspan3932">to apply to the latest snapshot!</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2789.7903"
         id="tspan3934" /><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2814.7903"
         id="tspan3936">Also like I predicted before, the latestMutationSnapshot appearing means it is simpler to consolidate</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2839.7903"
         id="tspan3938">the 'initial value' into a mutation on zero</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2864.7903"
         id="tspan3940" /><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2889.7903"
         id="tspan3942">What are snapshots then?</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2914.7903"
         id="tspan3944">If a mutation is the actual value</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2939.7903"
         id="tspan3946">and a snapshot is too?</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2964.7903"
         id="tspan3948" /><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="2989.7903"
         id="tspan3950">A snapshot is a 'current calculated state' that mutates zero, just like initial mutation</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3014.7903"
         id="tspan3952">So, a snapshot is a mutation!</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3039.7903"
         id="tspan3954" /><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3064.7903"
         id="tspan3956">Still, the 'latest snapshot' needs to be known to the 'actual key', which means that the new pointing</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3089.7903"
         id="tspan3958">to of the new/latest snapshot is a mutation to wherever/however the 'actual key' associates/knows</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3114.7903"
         id="tspan3960">both the latest snapshot and latest mutation? Or something, I lost myself here.</tspan><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3139.7903"
         id="tspan3962" /><tspan
         sodipodi:role="line"
         x="2537.0991"
         y="3164.7903"
         id="tspan3964" /></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2344.7661"
       y="3264.4636"
       id="text3966"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan3968"
         x="2344.7661"
         y="3264.4636">keyRemains(/appAbc/userProfileUserTest0)</tspan><tspan
         sodipodi:role="line"
         x="2344.7661"
         y="3289.4636"
         id="tspan3970">{</tspan><tspan
         sodipodi:role="line"
         x="2344.7661"
         y="3314.4636"
         id="tspan3984">    latestBase: /appAbc/userProfile/TestName0/Snapshot0/Mutation0</tspan><tspan
         sodipodi:role="line"
         x="2344.7661"
         y="3339.4636"
         id="tspan3972">}</tspan></text>
    <text
       id="text3986"
       y="3417.343"
       x="3142.3135"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="3417.343"
         x="3142.3135"
         id="tspan3988"
         sodipodi:role="line">sameFileMutationAKARecordAppendFor(sha1remains(/appAbc/userProfileTestName0))</tspan><tspan
         y="3442.343"
         x="3142.3135"
         sodipodi:role="line"
         id="tspan3990">{</tspan><tspan
         y="3467.343"
         x="3142.3135"
         sodipodi:role="line"
         id="tspan3996">    newLatestBase: /appAbc/userProfile/TestName0/Snapshot1/Mutation0</tspan><tspan
         y="3492.343"
         x="3142.3135"
         sodipodi:role="line"
         id="tspan3992">}</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2937.3215"
       y="3386.0859"
       id="text4002"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan4004"
         x="2937.3215"
         y="3386.0859">Above, we see a mutation that is 'recording a snapshot'. A snapshot is a series of mutations.</tspan><tspan
         sodipodi:role="line"
         x="2937.3215"
         y="3411.0859"
         id="tspan4006">The above will also snapshot it's mutations (TODOoptimization/TODOreq idk which), but far</tspan><tspan
         sodipodi:role="line"
         x="2937.3215"
         y="3436.0859"
         id="tspan4008">less infrequently: by whatever order of magnitude X (where X is the 'mutations-per-snapshot')</tspan><tspan
         sodipodi:role="line"
         x="2937.3215"
         y="3461.0859"
         id="tspan4010">less than the amount of snapshots that will be created for the actual relevant data mutations</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2938.7358"
       y="3526.0574"
       id="text4012"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         x="2938.7358"
         y="3526.0574"
         id="tspan4016">Snapshots are simply continually read until no more are found</tspan><tspan
         sodipodi:role="line"
         x="2938.7358"
         y="3551.0574"
         id="tspan4020">Mutations are read/found the same way, but stale mutations are no longer read/needed</tspan><tspan
         sodipodi:role="line"
         x="2938.7358"
         y="3576.0574"
         id="tspan4022">(for adequate 'timelining'/logging they are still needed (assuming the timelining/logging</tspan><tspan
         sodipodi:role="line"
         x="2938.7358"
         y="3601.0574"
         id="tspan4024">doesn't 'deep copy' the stuff at creation))</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:0.7570774;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect4026"
       width="676.237"
       height="46.911961"
       x="2433.6707"
       y="3943.2729" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2433.7922"
       y="3930.6667"
       id="text4028"><tspan
         sodipodi:role="line"
         id="tspan4030"
         x="2433.7922"
         y="3930.6667">sha1remains(/appAbc/userProfileTestName0)</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2535.6155"
       y="3899.554"
       id="text4032"><tspan
         sodipodi:role="line"
         id="tspan4034"
         x="2535.6155"
         y="3899.554">&quot;Initial Insert&quot;</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2439.4509"
       y="3974.6348"
       id="text3484"><tspan
         sodipodi:role="line"
         x="2439.4509"
         y="3974.6348"
         id="tspan3486"><tspan
           x="2439.4509"
           y="3974.6348"
           id="tspan3488">latestBase : /appAbc/userProfiles/TestName0/Snapshot0/Mutation0</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2438.0349"
       y="4145.627"
       id="text4044"><tspan
         sodipodi:role="line"
         id="tspan4046"
         x="2438.0349"
         y="4145.627">somehow-in-the-same-chunk-but(/appAbc/userProfiles/TestName0/Snapshot0/Mutation0)</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:0.63950986;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect4048"
       width="312.90167"
       height="93.698578"
       x="2440.6829"
       y="4159.5889" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2445.1072"
       y="4186.7725"
       id="text3490"><tspan
         sodipodi:role="line"
         x="2445.1072"
         y="4186.7725"
         id="tspan3492"><tspan
           x="2445.1072"
           y="4186.7725"
           id="tspan3494">byteArray : passwordHashed</tspan><tspan
           dx="0"
           x="2733.6228"
           y="4186.7725"
           id="tspan3496" /></tspan><tspan
         sodipodi:role="line"
         x="2445.1072"
         y="4211.7725"
         id="tspan3498"><tspan
           x="2445.1072"
           y="4211.7725"
           id="tspan3500">quint32 : joinDate</tspan><tspan
           dx="0"
           x="2625.3806"
           y="4211.7725"
           id="tspan3502" /></tspan><tspan
         sodipodi:role="line"
         x="2445.1072"
         y="4236.7725"
         id="tspan3504"><tspan
           x="2445.1072"
           y="4236.7725"
           id="tspan3506">string : email</tspan><tspan
           dx="0"
           x="2577.2166"
           y="4236.7725"
           id="tspan3508" /></tspan></text>
    <text
       id="text4064"
       y="4145.627"
       x="3386.9722"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="4145.627"
         x="3386.9722"
         id="tspan4066"
         sodipodi:role="line">somehow-in-the-same-chunk-but(/appAbc/userProfiles/TestName0/Snapshot0/Mutation1)</tspan></text>
    <rect
       y="4159.6021"
       x="3389.6335"
       height="93.671806"
       width="339.74496"
       id="rect4068"
       style="fill:none;stroke:#000000;stroke-width:0.66628152;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3394.0444"
       y="4186.7725"
       id="text3510"><tspan
         sodipodi:role="line"
         x="3394.0444"
         y="4186.7725"
         id="tspan3512"><tspan
           x="3394.0444"
           y="4186.7725"
           id="tspan3514">byteArray : newPasswordHashed</tspan><tspan
           dx="0"
           x="3722.4038"
           y="4186.7725"
           id="tspan3516" /></tspan><tspan
         sodipodi:role="line"
         x="3394.0444"
         y="4211.7725"
         id="tspan3518"><tspan
           x="3394.0444"
           y="4211.7725"
           id="tspan3520">string : newEmail</tspan><tspan
           dx="0"
           x="3567.8726"
           y="4211.7725"
           id="tspan3522" /></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3118.2864"
       y="4117.4761"
       id="text3524"><tspan
         sodipodi:role="line"
         x="3118.2864"
         y="4117.4761"
         id="tspan3526"><tspan
           x="3118.2864"
           y="4117.4761"
           id="tspan3528">After latest snapshot found, mutations read until not found</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="4320.353"
       y="4145.627"
       id="text4094"><tspan
         sodipodi:role="line"
         id="tspan4096"
         x="4320.353"
         y="4145.627">somehow-in-the-same-chunk-but(/appAbc/userProfiles/TestName0/Snapshot0/Mutation2)</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:0.66628152;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect4098"
       width="339.74496"
       height="93.671806"
       x="4323.0146"
       y="4159.6021" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="4327.4253"
       y="4186.7725"
       id="text3530"><tspan
         sodipodi:role="line"
         x="4327.4253"
         y="4186.7725"
         id="tspan3532"><tspan
           x="4327.4253"
           y="4186.7725"
           id="tspan3534">string : newEmail</tspan><tspan
           dx="0"
           x="4501.2534"
           y="4186.7725"
           id="tspan3536" /></tspan></text>
    <rect
       y="3943.2856"
       x="5277.667"
       height="46.886497"
       width="722.88062"
       id="rect4114"
       style="fill:none;stroke:#000000;stroke-width:0.78253937;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <text
       id="text4116"
       y="3930.6667"
       x="5277.7759"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="3930.6667"
         x="5277.7759"
         id="tspan4118"
         sodipodi:role="line">somehow-in-same-chunk-but(sha1remains(/appAbc/userProfileTestName0))</tspan></text>
    <text
       id="text4120"
       y="3899.554"
       x="5379.5991"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="3899.554"
         x="5379.5991"
         id="tspan4122"
         sodipodi:role="line">&quot;Mandatory Optimization of Snapshot&quot;</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="5283.4346"
       y="3974.6348"
       id="text3538"><tspan
         sodipodi:role="line"
         x="5283.4346"
         y="3974.6348"
         id="tspan3540"><tspan
           x="5283.4346"
           y="3974.6348"
           id="tspan3542">newLatestBase : /appAbc/userProfiles/TestName0/Snapshot1/Mutation0</tspan></tspan></text>
    <text
       id="text4132"
       y="4145.627"
       x="5276.3613"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="4145.627"
         x="5276.3613"
         id="tspan4134"
         sodipodi:role="line">somehow-in-the-same-chunk-but(/appAbc/userProfiles/TestName0/Snapshot1/Mutation0)</tspan></text>
    <rect
       y="4159.6147"
       x="5279.0356"
       height="93.64608"
       width="366.58929"
       id="rect4136"
       style="fill:none;stroke:#000000;stroke-width:0.69200861;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="5283.4336"
       y="4186.7725"
       id="text3544"><tspan
         sodipodi:role="line"
         x="5283.4336"
         y="4186.7725"
         id="tspan3546"><tspan
           x="5283.4336"
           y="4186.7725"
           id="tspan3548">byteArray : newestPasswordHashed</tspan><tspan
           dx="0"
           x="5642.3789"
           y="4186.7725"
           id="tspan3550" /></tspan><tspan
         sodipodi:role="line"
         x="5283.4336"
         y="4211.7725"
         id="tspan3552"><tspan
           x="5283.4336"
           y="4211.7725"
           id="tspan3554">quint32 : joinDate</tspan><tspan
           dx="0"
           x="5463.707"
           y="4211.7725"
           id="tspan3556" /></tspan><tspan
         sodipodi:role="line"
         x="5283.4336"
         y="4236.7725"
         id="tspan3558"><tspan
           x="5283.4336"
           y="4236.7725"
           id="tspan3560">string : newestEmail</tspan><tspan
           dx="0"
           x="5487.8477"
           y="4236.7725"
           id="tspan3562" /></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:48px;font-style:normal;font-weight:normal;fill:#0000ff;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="-4214.7944"
       y="5256.8516"
       id="text4148"
       transform="matrix(0,-1,1,0,0,0)"><tspan
         sodipodi:role="line"
         id="tspan4150"
         x="-4214.7944"
         y="5256.8516">SNAPSHOT</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2887.8242"
       y="4245.8921"
       id="text4156"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan4158"
         x="2887.8242"
         y="4245.8921">Sweet I think I'm finally making headway, now I just need to figure out the file format. I think the actual-value-mutations (bottom) need to be written before the latestSnapshot-mutations (top) are written, seeing as they always contain a reference to an actual-value-mutation</tspan><tspan
         sodipodi:role="line"
         x="2887.8242"
         y="4270.8921"
         id="tspan4160" /><tspan
         sodipodi:role="line"
         x="2887.8242"
         y="4295.8921"
         id="tspan4162">They all also need to somehow live within a single chunk!</tspan><tspan
         sodipodi:role="line"
         x="2887.8242"
         y="4320.8921"
         id="tspan4164" /><tspan
         sodipodi:role="line"
         x="2887.8242"
         y="4345.8921"
         id="tspan4166">-That the latestSnapshot-mutations will eventually be... snapshotted... is interesting to note, but I think proper coding (first, understanding) I don't think (1% hope) it will be a problem. I think it sounds more complicated than it really is</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1.54419136;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect4168"
       width="1552.994"
       height="477.45999"
       x="2926.4656"
       y="4623.9038" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2529.9224"
       y="4731.9155"
       id="text4170"><tspan
         sodipodi:role="line"
         id="tspan4172"
         x="2529.9224"
         y="4731.9155">sha1(/appAbc/userProfiles/TestUser0)</tspan><tspan
         sodipodi:role="line"
         x="2529.9224"
         y="4756.9155"
         id="tspan4174">= (ex.)</tspan><tspan
         sodipodi:role="line"
         x="2529.9224"
         y="4781.9155"
         id="tspan4176"><tspan
   style="fill:#ff0000"
   id="tspan4200">9</tspan>274abff8358ecd39720dcc</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3227.166"
       y="4610.9033"
       id="text4178"><tspan
         sodipodi:role="line"
         id="tspan4180"
         x="3227.166"
         y="4610.9033">Chunk Server</tspan></text>
    <rect
       style="fill:none;stroke:#000000;stroke-width:1.79498017;stroke-linecap:butt;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"
       id="rect4182"
       width="1210.9716"
       height="274.97665"
       x="3227.5635"
       y="4660.7983" />
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3336.0605"
       y="4650.5015"
       id="text4184"><tspan
         sodipodi:role="line"
         id="tspan4186"
         x="3336.0605"
         y="4650.5015">Chunk for '<tspan
   style="fill:#ff0000"
   id="tspan4202">9</tspan>'</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3228.3572"
       y="4683.0723"
       id="text3564"><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4683.0723"
         id="tspan3566"><tspan
           x="3228.3572"
           y="4683.0723"
           id="tspan3568">0 - quint32 size/qbapeek;[sha1remains+/Snapshot0/Mutation0];data{passwordHashed,joindate,email};</tspan><tspan
           dx="0"
           x="4268.7476"
           y="4683.0723"
           id="tspan3570" /></tspan><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4708.0723"
         id="tspan3572"><tspan
           x="3228.3572"
           y="4708.0723"
           id="tspan3574">1 - quint32 size/qbapeek;[sha1remains+/Snapshot0];data{latestBasePointerToEntry0Above};</tspan><tspan
           dx="0"
           x="4166.4038"
           y="4708.0723"
           id="tspan3576" /></tspan><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4733.0723"
         id="tspan3578"><tspan
           x="3228.3572"
           y="4733.0723"
           id="tspan3580">2 - quint32 size/qbapeek;[sha1remains+/Snapshot0/Mutation1];data{newPasswordHashed,newEmail};</tspan><tspan
           dx="0"
           x="4262.8101"
           y="4733.0723"
           id="tspan3582" /></tspan><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4758.0723"
         id="tspan3584"><tspan
           x="3228.3572"
           y="4758.0723"
           id="tspan3586">3 - quint32 size/qbapeek;[sha1remains+/Snapshot0/Mutation2];data{newEmail};</tspan><tspan
           dx="0"
           x="4046.1697"
           y="4758.0723"
           id="tspan3588" /></tspan><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4783.0723"
         id="tspan3590"><tspan
           x="3228.3572"
           y="4783.0723"
           id="tspan3593">4 - quint32 size/qbapeek;[sha1remains+/Snapshot1/Mutation0];data{newestPasswordHashed,joinDate,newestEmail};</tspan><tspan
           dx="0"
           x="4414.1772"
           y="4783.0723"
           id="tspan3595" /></tspan><tspan
         sodipodi:role="line"
         x="3228.3572"
         y="4808.0723"
         id="tspan3597"><tspan
           x="3228.3572"
           y="4808.0723"
           id="tspan3599">5 - quint32 size/qbapeek;[sha1remains+/Snapshot1];data{latestBasePointerToEntry4Above};</tspan><tspan
           dx="0"
           x="4166.4038"
           y="4808.0723"
           id="tspan3601" /></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="4457.6011"
       y="4597.1167"
       id="text4212"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4597.1167"
         id="tspan4216">Even though writing CAN take 2 writes,</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4622.1167"
         id="tspan4220">each write is guaranteed to be atomic</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4647.1167"
         id="tspan4222">so it doesn't matter if other stuff happens</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4672.1167"
         id="tspan4224">in between. the latestBasePointerToEntry</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4697.1167"
         id="tspan4226">should use offsets into file, not just the concept</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4722.1167"
         id="tspan4228">of 'above'/previous</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4747.1167"
         id="tspan4230" /><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4772.1167"
         id="tspan4232">As soon as a write is seen, we can block all reads</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4797.1167"
         id="tspan4234">to it until the second 'write' is complete (note that</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4822.1167"
         id="tspan4236">this has nothing to do with syncing to hdd, but does</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4847.1167"
         id="tspan4238">have to do with replicas also getting both 'writes'</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4872.1167"
         id="tspan4240">complete (the second being (at max) the [initial] snapshot)</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4897.1167"
         id="tspan4242" /><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4922.1167"
         id="tspan4244">-Regular Mutations (common case) have one write</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4947.1167"
         id="tspan4246">-Initial Writes and Snapshots have two writes</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4972.1167"
         id="tspan4248">--We do not snapshot while writing, but instead schedule one</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="4997.1167"
         id="tspan4250">   to be performed later. This scheduling could be done at the</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="5022.1167"
         id="tspan4252">   end of a write</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="5047.1167"
         id="tspan4254">----I think care needs to be taken to make sure we don't snapshot</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="5072.1167"
         id="tspan4256">     in the middle of a 2-part &quot;write&quot; (the snapshotting of something else?)</tspan><tspan
         sodipodi:role="line"
         x="4457.6011"
         y="5097.1167"
         id="tspan4258">     they need to be atomic in that sense, somehow</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:40px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="1862.4501"
       y="4201.9814"
       id="text4260"><tspan
         sodipodi:role="line"
         id="tspan4262"
         x="1862.4501"
         y="4201.9814">Actual-Value-Mutations:</tspan></text>
    <text
       id="text4264"
       y="3975.7073"
       x="1812.9526"
       style="font-size:40px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       xml:space="preserve"><tspan
         y="3975.7073"
         x="1812.9526"
         id="tspan4266"
         sodipodi:role="line">LatestSnapshot-Mutations:</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:144px;font-style:normal;font-weight:normal;fill:#008000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="729.67145"
       y="3997.6296"
       id="text3603"><tspan
         sodipodi:role="line"
         x="729.67145"
         y="3997.6296"
         id="tspan3605"><tspan
           x="729.67145"
           y="3997.6296"
           id="tspan3607">GFS as K/V </tspan></tspan><tspan
         sodipodi:role="line"
         x="729.67145"
         y="4177.6294"
         id="tspan3609"><tspan
           x="729.67145"
           y="4177.6294"
           id="tspan3611">document </tspan></tspan><tspan
         sodipodi:role="line"
         x="729.67145"
         y="4357.6294"
         id="tspan3613"><tspan
           x="729.67145"
           y="4357.6294"
           id="tspan3615">store SOLVED</tspan></tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2772"
       y="5017.2769"
       id="text4276"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan4278"
         x="2772"
         y="5017.2769">TODOreq: We could even (and might require!) use an [end-of-entry] magic num if we needed to, or a Magic [beginning-of-entry], but really</tspan><tspan
         sodipodi:role="line"
         x="2772"
         y="5042.2769"
         id="tspan4280">specifying the size should be enough.... however, is it fault tolerant? Methinks more is needed to make the file format falt tolerant.</tspan><tspan
         sodipodi:role="line"
         x="2772"
         y="5067.2769"
         id="tspan4282">Appends can be backed out of but we still won't delete/overwrite the places where they worked (specifically, the replicas). This is</tspan><tspan
         sodipodi:role="line"
         x="2772"
         y="5092.2769"
         id="tspan4284">perhaps a higher level design consideration, but I am unsure.</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="2930.3572"
       y="4971.5703"
       id="text4286"><tspan
         sodipodi:role="line"
         id="tspan4288"
         x="2930.3572"
         y="4971.5703">The chunk server knows the latest state of the data in memory,</tspan><tspan
         sodipodi:role="line"
         x="2930.3572"
         y="4996.5703"
         id="tspan4290">but at startup/loading to recreate the data, it looks/loops for [sha1remains+/Snapshot{N}] until one isn't found, then get/apply every mutation thereafter</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="344.07288"
       y="4719.1685"
       id="text4292"><tspan
         sodipodi:role="line"
         id="tspan4294"
         x="344.07288"
         y="4719.1685">Random: Letting non-primary replicas handle reading would lead to stale reads if we ever used overwriting techniques</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4744.1685"
         id="tspan4296">Actually it still does.</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4769.1685"
         id="tspan4298">We can get a stale read if a read is done on a non-primary replica before a mutation can be propagated from primary to non-primary</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4794.1685"
         id="tspan4300">If that read were to go to primary (after receiving the write but before completing it), we could block/hold it until the write complete</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4819.1685"
         id="tspan4302">-The non-primary replica is oblivious to that mutation until the primary notifies him in preparation of applying it!</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4844.1685"
         id="tspan4304" /><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4869.1685"
         id="tspan4306">There is no way around this (CAP), so perhaps I should force all reads/writes through the primary?</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4894.1685"
         id="tspan4308">It is still possible to use 'cache instantiations' (not confused with replicas! they are only ever in-memory) to help with read hot spots</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4919.1685"
         id="tspan4310">I submitted a design for one that retains atomic writes to the couchbase forum/bug report (improvement). I can use that design so</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4944.1685"
         id="tspan4312">this doesn't really become much of an issue.</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4969.1685"
         id="tspan4314" /><tspan
         sodipodi:role="line"
         x="344.07288"
         y="4994.1685"
         id="tspan4316">Reads can still be performed on a non-primary in the event of primary replica fault (many scenarios), in which an async</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="5019.1685"
         id="tspan4318">'fix-replicas-probably-by-using-new-replica' can be dispatched. I think (but might be wrong) that that async fix-replicas issue needs</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="5044.1685"
         id="tspan4320">to be solved before a write can go through, but am unsure tbh. That might be a serious performance impact and negate the</tspan><tspan
         sodipodi:role="line"
         x="344.07288"
         y="5069.1685"
         id="tspan4322">purpose of being fault tolerant!</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="5219.8623"
       y="4593.5742"
       id="text4324"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan4326"
         x="5219.8623"
         y="4593.5742">Random: When a read that is blocking for a right is told that the write it</tspan><tspan
         sodipodi:role="line"
         x="5219.8623"
         y="4618.5742"
         id="tspan4328">was waiting for to finish... FAILED, then that read simply returns the</tspan><tspan
         sodipodi:role="line"
         x="5219.8623"
         y="4643.5742"
         id="tspan4330">most recently valid write. It does not block for the retry, which is up</tspan><tspan
         sodipodi:role="line"
         x="5219.8623"
         y="4668.5742"
         id="tspan4332">to the client/application anyways. Probably the client so as to lessen</tspan><tspan
         sodipodi:role="line"
         x="5219.8623"
         y="4693.5742"
         id="tspan4334">the load of the end-user/programmer</tspan></text>
    <text
       xml:space="preserve"
       style="font-size:20px;font-style:normal;font-weight:normal;fill:#000000;fill-opacity:1;stroke:none;font-family:Bitstream Vera Sans"
       x="3204"
       y="5213.2769"
       id="text4336"
       transform="translate(42.357143,154.29355)"><tspan
         sodipodi:role="line"
         id="tspan4338"
         x="3204"
         y="5213.2769">I guess whenever an append fails, the primary replica will know about it no matter what.</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5238.2769"
         id="tspan4340">So in addition to the Mutation Order, the primary also knows what offset to skip to (in accord</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5263.2769"
         id="tspan4342">with the failed write of one of the replicas or himself) and sends that along with the mutation order when appropriate.</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5288.2769"
         id="tspan4344" /><tspan
         sodipodi:role="line"
         x="3204"
         y="5313.2769"
         id="tspan4346">This makes me think that a 'stamp' needs to be used at the end to record (syncrhonously for primary, asynchronously(?)</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5338.2769"
         id="tspan4348">for non-primaries) a write complete. But then what if that stamp itself fails? FML. So perhaps synchronously? GFS</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5363.2769"
         id="tspan4350">whitepaper didn't mention anything about a 3rd communication with the non-primaries, asynchronous or not!</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5388.2769"
         id="tspan4352" /><tspan
         sodipodi:role="line"
         x="3204"
         y="5413.2769"
         id="tspan4354">So my question is: How, when replaying/starting-up, do we know a record to be failed when it only failed on the non-primaries?</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5438.2769"
         id="tspan4356">We cannot rely on the non-primaries to deduce a record failed (unless we have a stamp ofc) because he might have the</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5463.2769"
         id="tspan4358">'header' and first portion of the record written correctly, which is what we might erroneously use to deduce correctness.</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5488.2769"
         id="tspan4360" /><tspan
         sodipodi:role="line"
         x="3204"
         y="5513.2769"
         id="tspan4362">Perhaps the answer is to use the opposite of a stamp: We stamp on fail! All replicas now mark that the falt'd write range is now</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5538.2769"
         id="tspan4364">undefined. The common use case is success after all! The fail-stamp should be synchronously applied by the master to all other</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5563.2769"
         id="tspan4366">replicas (I'm not sure if this includes the faulty replica, but it might -- still the wording is perfect for when there are many (20?)</tspan><tspan
         sodipodi:role="line"
         x="3204"
         y="5588.2769"
         id="tspan4368">replicas (not that I'd ever have it that high))</tspan></text>
  </g>
</svg>
