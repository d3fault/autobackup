the file size in my gfs clone is unlimited, because i can't identify what range of 64mb has what particular piece of that range. in my case one particular file represents a range in the sharding hash, not a filename. However, the partition map is allowed to be unevenly distributed. It is allowed to cache frequent reads, if possible. The partition map is paxos agreed upon. I guess the system is unavailable when a paxos agreement is ongoing? Do we have to stop all serving during that period? idfk tbh. Sounds like shit design. I think paxos algorithm solves this problem, fuck it.

when a file (which represents a range) changes (as it is grown or shrunk (only as needed)) in the partition mapping, it is copied to two new files and the old one file is eventually deleted after a round of verification that it isn't needed (and perhaps multiple thereof)

the design adapts to the chaos of the filesystem access because it is only repartitioned periodically. the replicas have already finished their copying by the time the repartition command comes. we coordinated with them and perhaps in a paxos manner also, but we did not take the system down for them during that communciation. but now that the repartition command is here, all future reads and writes block until the repartition is complete. Actually, reads can continue I think. Writes need to stop though. And 404s can of course be responded to (not using HTTP btw just sayin). If the file is there before the repartition command but not after, we can ah fuck idk figure this out later I can't right now